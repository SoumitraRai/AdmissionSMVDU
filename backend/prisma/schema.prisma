// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
  output   = "./generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model StudentApplication {
  applicationNumber String   @id
  studentName       String
  fatherMotherName  String
  phoneNumber       String
  email             String
  jeeCRL            Int
  category          String
  categoryRank      Int
  subCategory       String?
  subCategoryRank   Int?

  courseChoice1     String
  courseChoice2     String?
  courseChoice3     String?
  courseChoice4     String?
  courseChoice5     String?
  courseChoice6     String?
  courseChoice7     String?

  createdAt         DateTime @default(now())
}

model Department {
  id         String       @id
  name       String
  seatMatrix SeatMatrix[]
}

model SeatMatrix {
  id           Int        @id @default(autoincrement())
  department   Department @relation(fields: [departmentId], references: [id])
  departmentId String
  category     String
  subCategory  String?
  totalSeats   Int
}

model AllocatedSeat {
  id                Int                @id @default(autoincrement())
  studentId         String
  allocatedCourse   String
  allocationRound   Int
  allocatedAt       DateTime           @default(now())
}